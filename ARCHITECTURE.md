# ğŸ—ï¸ System-Architektur - ZipMend Transport Management

## ğŸ“ Architektur-Ãœbersicht

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BENUTZER                                 â”‚
â”‚                    (Browser / Mobile)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ HTTP/HTTPS
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND (React)                              â”‚
â”‚                   Port: 5173 (Dev)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Pages:                                                   â”‚  â”‚
â”‚  â”‚  â€¢ Login / Register                                       â”‚  â”‚
â”‚  â”‚  â€¢ Customer Dashboard                                     â”‚  â”‚
â”‚  â”‚  â€¢ Contractor Dashboard                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Components:                                              â”‚  â”‚
â”‚  â”‚  â€¢ Navbar, CreateOrderModal, ProtectedRoute              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Services:                                                â”‚  â”‚
â”‚  â”‚  â€¢ API Client (Axios)                                     â”‚  â”‚
â”‚  â”‚  â€¢ Auth Context (JWT Token Management)                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ REST API
                         â”‚ /api/*
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  BACKEND (Node.js/Express)                       â”‚
â”‚                     Port: 5000                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Routes:                                                  â”‚  â”‚
â”‚  â”‚  â€¢ /api/auth (register, login, profile)                  â”‚  â”‚
â”‚  â”‚  â€¢ /api/orders (create, list, accept, update)            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Middleware:                                              â”‚  â”‚
â”‚  â”‚  â€¢ JWT Authentication                                     â”‚  â”‚
â”‚  â”‚  â€¢ Role Authorization (customer/contractor)              â”‚  â”‚
â”‚  â”‚  â€¢ Input Validation                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Controllers:                                             â”‚  â”‚
â”‚  â”‚  â€¢ authController (Login/Register Logic)                 â”‚  â”‚
â”‚  â”‚  â€¢ orderController (Order Management Logic)              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Models:                                                  â”‚  â”‚
â”‚  â”‚  â€¢ User Model (CRUD Operations)                          â”‚  â”‚
â”‚  â”‚  â€¢ Order Model (CRUD Operations)                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                           â”‚
             â”‚                           â”‚
             â”‚                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DATABASE               â”‚  â”‚   EMAIL SERVICE                 â”‚
â”‚   (PostgreSQL)           â”‚  â”‚   (Nodemailer)                  â”‚
â”‚   Port: 5432             â”‚  â”‚                                 â”‚
â”‚                          â”‚  â”‚   SMTP Configuration:           â”‚
â”‚  Tables:                 â”‚  â”‚   â€¢ Gmail / Mailgun / etc.      â”‚
â”‚  â€¢ users                 â”‚  â”‚                                 â”‚
â”‚  â€¢ transport_orders      â”‚  â”‚   Templates:                    â”‚
â”‚                          â”‚  â”‚   â€¢ Order Created               â”‚
â”‚  Indexes:                â”‚  â”‚   â€¢ Order Accepted (Customer)   â”‚
â”‚  â€¢ customer_id           â”‚  â”‚   â€¢ Order Accepted (Contractor) â”‚
â”‚  â€¢ contractor_id         â”‚  â”‚                                 â”‚
â”‚  â€¢ status                â”‚  â”‚                                 â”‚
â”‚  â€¢ email                 â”‚  â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Datenfluss

### 1. Benutzer-Registrierung

```
Browser â†’ POST /api/auth/register
         â†“
    Validation (express-validator)
         â†“
    Password Hashing (bcrypt)
         â†“
    User.create() â†’ PostgreSQL
         â†“
    Generate JWT Token
         â†“
    Response mit Token & User Data
         â†“
    Browser speichert Token (localStorage)
```

### 2. Auftragserstellung (Kunde)

```
Customer Dashboard â†’ "Neuen Auftrag erstellen"
         â†“
    CreateOrderModal (Formular)
         â†“
    POST /api/orders (mit JWT Token)
         â†“
    JWT Verification
         â†“
    Role Check (nur customer)
         â†“
    Input Validation
         â†“
    Order.create() â†’ PostgreSQL
         â†“
    Email Service â†’ Nodemailer
         â†“
    SMTP â†’ Email an Kunde
         â†“
    Response mit Order Data
         â†“
    Dashboard aktualisiert
```

### 3. Auftragsannahme (Auftragnehmer)

```
Contractor Dashboard â†’ "VerfÃ¼gbare AuftrÃ¤ge"
         â†“
    GET /api/orders/available (mit JWT Token)
         â†“
    JWT Verification
         â†“
    Role Check (nur contractor)
         â†“
    Order.getAvailableOrders() â†’ PostgreSQL
         â†“
    Liste der pending Orders
         â†“
    Contractor wÃ¤hlt Auftrag â†’ "Annehmen"
         â†“
    PUT /api/orders/:id/accept (mit JWT Token)
         â†“
    JWT Verification
         â†“
    Role Check (nur contractor)
         â†“
    Order.acceptOrder() â†’ PostgreSQL
         â”œâ”€ Status: pending â†’ accepted
         â”œâ”€ contractor_id gesetzt
         â””â”€ accepted_at timestamp
         â†“
    Email Service â†’ Nodemailer
         â”œâ”€ Email an Kunde (Benachrichtigung)
         â””â”€ Email an Contractor (BestÃ¤tigung)
         â†“
    Response mit Order Data
         â†“
    Dashboard aktualisiert
```

## ğŸ” Authentifizierungs-Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. POST /api/auth/login
       â”‚    { email, password }
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Auth Controller    â”‚
â”‚                      â”‚
â”‚ 2. Find User by Emailâ”‚
â”‚ 3. Verify Password   â”‚
â”‚    (bcrypt.compare)  â”‚
â”‚ 4. Generate JWT      â”‚
â”‚    (jwt.sign)        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 5. Response
       â”‚    { token, user }
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚
â”‚              â”‚
â”‚ 6. Store in  â”‚
â”‚  localStorageâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 7. Subsequent Requests
       â”‚    Authorization: Bearer <token>
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth Middleware     â”‚
â”‚                      â”‚
â”‚ 8. Extract Token     â”‚
â”‚ 9. Verify Token      â”‚
â”‚    (jwt.verify)      â”‚
â”‚ 10. Attach user to   â”‚
â”‚     req.user         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 11. Continue to Route Handler
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Controller         â”‚
â”‚   (Protected Route)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Datenbank-Beziehungen

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              users                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                                 â”‚
â”‚ email (UNIQUE)                          â”‚
â”‚ password (hashed)                       â”‚
â”‚ role (customer | contractor)            â”‚
â”‚ company_name                            â”‚
â”‚ first_name                              â”‚
â”‚ last_name                               â”‚
â”‚ phone                                   â”‚
â”‚ created_at                              â”‚
â”‚ updated_at                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                 â”‚
        â”‚ 1:N             â”‚ 1:N
        â”‚ (customer)      â”‚ (contractor)
        â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        transport_orders                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                                 â”‚
â”‚ customer_id (FK â†’ users.id)             â”‚
â”‚ contractor_id (FK â†’ users.id, nullable) â”‚
â”‚                                         â”‚
â”‚ -- Pickup Info --                       â”‚
â”‚ pickup_address                          â”‚
â”‚ pickup_city                             â”‚
â”‚ pickup_postal_code                      â”‚
â”‚ pickup_date                             â”‚
â”‚ pickup_time                             â”‚
â”‚ pickup_contact_name                     â”‚
â”‚ pickup_contact_phone                    â”‚
â”‚                                         â”‚
â”‚ -- Delivery Info --                     â”‚
â”‚ delivery_address                        â”‚
â”‚ delivery_city                           â”‚
â”‚ delivery_postal_code                    â”‚
â”‚ delivery_date                           â”‚
â”‚ delivery_time                           â”‚
â”‚ delivery_contact_name                   â”‚
â”‚ delivery_contact_phone                  â”‚
â”‚                                         â”‚
â”‚ -- Shipment Details --                  â”‚
â”‚ vehicle_type                            â”‚
â”‚ weight                                  â”‚
â”‚ length, width, height                   â”‚
â”‚ pallets                                 â”‚
â”‚ description                             â”‚
â”‚ special_requirements                    â”‚
â”‚ price                                   â”‚
â”‚                                         â”‚
â”‚ -- Status & Timestamps --               â”‚
â”‚ status (pending|accepted|in_transit|    â”‚
â”‚         completed|cancelled)            â”‚
â”‚ created_at                              â”‚
â”‚ updated_at                              â”‚
â”‚ accepted_at                             â”‚
â”‚ completed_at                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ API Endpoint-Struktur

```
/api
â”œâ”€â”€ /auth
â”‚   â”œâ”€â”€ POST   /register        # Benutzer registrieren
â”‚   â”œâ”€â”€ POST   /login           # Benutzer anmelden
â”‚   â””â”€â”€ GET    /profile         # Profil abrufen (ğŸ”’)
â”‚
â””â”€â”€ /orders
    â”œâ”€â”€ GET    /                # Eigene AuftrÃ¤ge (ğŸ”’)
    â”œâ”€â”€ POST   /                # Auftrag erstellen (ğŸ”’ customer)
    â”œâ”€â”€ GET    /available       # VerfÃ¼gbare AuftrÃ¤ge (ğŸ”’ contractor)
    â”œâ”€â”€ GET    /:id             # Einzelner Auftrag (ğŸ”’)
    â”œâ”€â”€ PUT    /:id/accept      # Auftrag annehmen (ğŸ”’ contractor)
    â””â”€â”€ PUT    /:id/status      # Status Ã¤ndern (ğŸ”’)

ğŸ”’ = JWT Token erforderlich
ğŸ”’ customer = Nur fÃ¼r Kunden
ğŸ”’ contractor = Nur fÃ¼r Auftragnehmer
```

## ğŸ”„ Status-ÃœbergÃ¤nge

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ pending  â”‚ â† Auftrag erstellt
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ Contractor nimmt an
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ accepted â”‚ â† Auftrag angenommen
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ Transport beginnt
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚in_transit â”‚ â† Unterwegs
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ Zustellung erfolgt
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ completed â”‚ â† Abgeschlossen
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

     oder
     
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ pending  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ Stornierung
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ cancelled â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“§ Email-Flow

```
Event: Auftrag erstellt
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  orderController   â”‚
â”‚  .createOrder()    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Email Service     â”‚
â”‚  emailTemplates    â”‚
â”‚  .orderCreated()   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Nodemailer       â”‚
â”‚   SMTP Transport   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Gmail / SMTP     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Kunde Inbox       â”‚
â”‚  âœ‰ï¸ BestÃ¤tigung    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Event: Auftrag angenommen
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  orderController   â”‚
â”‚  .acceptOrder()    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                 â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Email an Kunde â”‚  â”‚Email an Contr. â”‚  â”‚ DB Update      â”‚
â”‚ (Benachricht.) â”‚  â”‚ (BestÃ¤tigung)  â”‚  â”‚ Status=acceptedâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ›¡ï¸ Sicherheits-Layer

```
Request
   â”‚
   â”œâ”€ CORS Middleware
   â”‚   â””â”€ Erlaubt nur CLIENT_URL
   â”‚
   â”œâ”€ Body Parser
   â”‚   â””â”€ JSON Parsing
   â”‚
   â”œâ”€ JWT Verification
   â”‚   â”œâ”€ Token vorhanden?
   â”‚   â”œâ”€ Token gÃ¼ltig?
   â”‚   â””â”€ Token nicht abgelaufen?
   â”‚
   â”œâ”€ Role Authorization
   â”‚   â””â”€ Hat Benutzer die richtige Rolle?
   â”‚
   â”œâ”€ Input Validation
   â”‚   â”œâ”€ express-validator
   â”‚   â””â”€ Sanitization
   â”‚
   â””â”€ Controller
       â””â”€ Business Logic
```

## ğŸš€ Deployment-Architektur (Produktion)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Load Balancer                         â”‚
â”‚                    (Nginx / Cloudflare)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend   â”‚  â”‚   Backend    â”‚
â”‚   (Vercel/   â”‚  â”‚   (Heroku/   â”‚
â”‚   Netlify)   â”‚  â”‚   Railway)   â”‚
â”‚              â”‚  â”‚              â”‚
â”‚   Static     â”‚  â”‚   Node.js    â”‚
â”‚   Files      â”‚  â”‚   Express    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
        â”‚  PostgreSQL   â”‚  â”‚  Email SMTP  â”‚
        â”‚  (Managed DB) â”‚  â”‚  (Mailgun/   â”‚
        â”‚               â”‚  â”‚   SendGrid)  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“± Client-Side Routing

```
/
â”œâ”€â”€ /login              â†’ Login Page
â”œâ”€â”€ /register           â†’ Register Page
â””â”€â”€ /dashboard          â†’ Protected Route
    â”œâ”€â”€ Customer Role   â†’ CustomerDashboard
    â””â”€â”€ Contractor Role â†’ ContractorDashboard
```

## ğŸ¨ Component-Hierarchie

```
App
â”œâ”€â”€ AuthProvider (Context)
â”‚   â””â”€â”€ Router
â”‚       â”œâ”€â”€ Login
â”‚       â”œâ”€â”€ Register
â”‚       â””â”€â”€ ProtectedRoute
â”‚           â””â”€â”€ DashboardRouter
â”‚               â”œâ”€â”€ CustomerDashboard
â”‚               â”‚   â”œâ”€â”€ Navbar
â”‚               â”‚   â”œâ”€â”€ Stats Cards
â”‚               â”‚   â”œâ”€â”€ Orders Table
â”‚               â”‚   â””â”€â”€ CreateOrderModal
â”‚               â”‚
â”‚               â””â”€â”€ ContractorDashboard
â”‚                   â”œâ”€â”€ Navbar
â”‚                   â”œâ”€â”€ Tabs (Available / My Orders)
â”‚                   â””â”€â”€ Order Cards
```

---

Diese Architektur bietet:
- âœ… Skalierbarkeit
- âœ… Sicherheit
- âœ… Wartbarkeit
- âœ… Erweiterbarkeit
- âœ… Klare Trennung von Verantwortlichkeiten
